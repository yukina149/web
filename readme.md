# readme

# **專案：雙角色 AI 自動對話系統 🎭**

實作影片：

[https://drive.google.com/file/d/1xpIUkWTXo69cA4N1i4quVXt0mrjFv-kh/view?usp=sharing](https://drive.google.com/file/d/1xpIUkWTXo69cA4N1i4quVXt0mrjFv-kh/view?usp=sharing)

## **專案簡介**

本專案是一個互動式的 Web 應用程式，旨在模擬兩個由 AI 扮演的不同角色之間的自動對話。使用者可以選擇或自訂兩個 AI 角色，設定其性格背景，並提供一個初始對話話題。系統隨後會利用 Google Gemini API，驅動這兩個 AI 角色圍繞該話題，依據各自的設定進行多輪次的自動對話。

此應用程式使用 Python 語言開發，並透過 Gradio 函式庫快速建構使用者介面。專案不僅包含了前後端互動邏輯，還整合了 API 金鑰管理、錯誤處理機制以及可自訂的對話參數（如回應長度、對話輪次）等功能。

補充說明：本作業因為個人的喜好對於人物的主題跟語言進行一部分的修改了

本作業所使用的預設人物如下

[https://wikiwiki.jp/nijisanji/星導ショウ](https://wikiwiki.jp/nijisanji/%E6%98%9F%E5%B0%8E%E3%82%B7%E3%83%A7%E3%82%A6)

[https://wikiwiki.jp/nijisanji/叢雲カゲツ](https://wikiwiki.jp/nijisanji/%E5%8F%A2%E9%9B%B2%E3%82%AB%E3%82%B2%E3%83%84)

## 新增的一些細節

1.對話內容除了名字還會有頭像方便辨識角色

2.除了預設的角色也可以自己設定並填入說明

3.語言的選擇

4.角色之間因為有關係性，所以提示詞有放入詳細的關係描述，以及在程式中判斷選擇的角色若是這兩人的話就要使用這些關係描述的提示詞

## **如何設定環境**

### **1. 安裝必要的 Python 函式庫**

本專案需要 `google-generativeai` 和 `gradio` 兩個核心函式庫。您可以使用 pip 進行安裝：

```
pip install google-generativeai gradio
```

如果您是在 Google Colab 環境中執行，可以直接在一個儲存格中運行 `!pip install -q -U google-generativeai gradio` 來完成安裝。

### **2. 設定 Google Gemini API 金鑰**

為了讓系統能夠呼叫 AI 模型，您必須設定您的 Google Gemini API 金鑰。程式提供了三種設定方式，會依序檢查，建議優先使用前兩種以策安全：

- **(建議) Google Colab 的密鑰功能**：
    1. 在 Colab 介面左側的工具列中，點擊「鑰匙」圖示（密鑰）。
    2. 點擊「新增密鑰」。
    3. 將密鑰命名為 `GOOGLE_API_KEY`。
    4. 在「值」的欄位中貼上您的 Gemini API 金鑰。
    5. 程式會自動讀取此密鑰。
- **環境變數設定**：
    - 在您的作業系統中設定一個名為 `GOOGLE_GEMINI_API_KEY` 的環境變數，並將其值設為您的 API 金鑰。程式在啟動時會嘗試讀取此變數。
- **在網頁介面中臨時輸入**：
    - 如果以上兩種方式都未設定，您可以在程式啟動後的 Gradio 介面中，找到「API 金鑰設定」分頁，並在輸入框中直接貼上您的金鑰。此方法較不安全，僅建議用於臨時測試。

## **如何使用?**

1. **啟動應用程式**：
    
    **在 Google Colab 中**：依序執行筆記本中的所有儲存格。執行最後一個儲存格後，Gradio 會啟動一個本地伺服器，並提供一個公開的網址（Public URL）。點擊該網址即可在新分頁中開啟應用程式介面。
    
    **在本地環境中**：將程式碼儲存為一個 `.py` 檔案，然後透過終端機執行 `python your_script_name.py`。Gradio 會在終端機中顯示本地網址（通常是 `http://127.0.0.1:7860`），在瀏覽器中開啟即可。
    
2. 進行角色設定
    
    在應用程式介面中，您可以設定 **角色 1** 與 **角色 2**。
    
    **您可以從預設的「星導ショウ」和「叢雲カゲツ」中選擇，或選擇「Custom」來自訂角色的名稱與描述。**
    
3. **設定對話參數**：
    
    在「對話設定」區塊，輸入您希望他們討論的「**初始話題**」。
    
    使用滑桿調整「**AI的各ラウンドの応答文字数上限**」（AI 單次回應的最大字數）和「**対話の総ラウンド数**」（對話總共要進行幾輪）。
    
    選擇對話希望使用的**語言**（日文、English、中文）。
    
    **但是由於使用的是gemini AI 在這方面它翻譯成中文的效能不太OK 儘管prompt告訴他要使用中文依舊會是日文(因為我角色說明的內容都是給日文)**
    
4. **開始與清除對話**：
    
    完成所有設定後，點擊「**對話開始**」按鈕，AI 將開始自動生成對話。
    
    對話內容會即時顯示在下方的「對話記錄」區塊中。
    
    若要開始新的一輪對話，可以點擊「**對話記錄をクリア**」按鈕來清空目前的對話內容。